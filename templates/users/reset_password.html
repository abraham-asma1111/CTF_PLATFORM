{% extends 'base.html' %}

{% block title %}Reset Password - CTF Platform{% endblock %}

{% block content %}
<div class="card" style="max-width: 500px; margin: 0 auto;">
  <div class="card-header">
    <h1 class="card-title">ğŸ” Reset Password</h1>
    <p>Enter your new password for <strong>{{ user.username }}</strong></p>
  </div>

  <form method="post">
    {% csrf_token %}

    <div class="form-group">
      <label for="id_password1" class="form-label">New Password:</label>
      <div style="position: relative;">
        <input type="password" name="password1" id="id_password1" class="form-control" placeholder="Enter new password"
          required autofocus>
        <span class="password-toggle" onclick="togglePassword('id_password1')"
          style="position: absolute; right: 10px; top: 10px; cursor: pointer; font-size: 1.2rem;">ğŸ‘ï¸</span>
      </div>
      <small style="color: #666; display: block; margin-top: 0.5rem;">
        Password must be at least 8 characters long.
      </small>
    </div>

    <div class="form-group">
      <label for="id_password2" class="form-label">Confirm New Password:</label>
      <div style="position: relative;">
        <input type="password" name="password2" id="id_password2" class="form-control"
          placeholder="Confirm new password" required>
        <span class="password-toggle" onclick="togglePassword('id_password2')"
          style="position: absolute; right: 10px; top: 10px; cursor: pointer; font-size: 1.2rem;">ğŸ‘ï¸</span>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" style="width: 100%;">Reset Password</button>
  </form>

  <div style="text-align: center; margin-top: 1rem;">
    <p><a href="{% url 'users:login' %}">Back to Login</a></p>
  </div>
</div>

<script>
  function togglePassword(fieldId) {
    const field = document.getElementById(fieldId);
    const icon = event.target;

    if (field.type === 'password') {
      field.type = 'text';
      icon.textContent = 'ğŸ™ˆ';
    } else {
      field.type = 'password';
      icon.textContent = 'ğŸ‘ï¸';
    }
  }
</script>
{% endblock %}